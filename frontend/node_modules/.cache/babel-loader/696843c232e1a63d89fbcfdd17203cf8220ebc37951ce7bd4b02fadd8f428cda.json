{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{playerAPI,handleAPIError}from'../utils/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PlayerSearch=_ref=>{let{onPlayerSelect,placeholder=\"Search for players...\"}=_ref;const[query,setQuery]=useState('');const[results,setResults]=useState([]);const[loading,setLoading]=useState(false);const[showResults,setShowResults]=useState(false);const[error,setError]=useState(null);const searchRef=useRef(null);const debounceRef=useRef(null);// Debounced search\nuseEffect(()=>{if(debounceRef.current){clearTimeout(debounceRef.current);}if(query.length>=2){debounceRef.current=setTimeout(()=>{performSearch(query);},300);}else{setResults([]);setShowResults(false);}return()=>{if(debounceRef.current){clearTimeout(debounceRef.current);}};},[query]);// Click outside handler\nuseEffect(()=>{const handleClickOutside=event=>{if(searchRef.current&&!searchRef.current.contains(event.target)){setShowResults(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>document.removeEventListener('mousedown',handleClickOutside);},[]);const performSearch=async searchQuery=>{try{setLoading(true);setError(null);const response=await playerAPI.search(searchQuery,8);setResults(response.data||[]);setShowResults(true);}catch(error){setError(handleAPIError(error));setResults([]);}finally{setLoading(false);}};const handlePlayerClick=player=>{setQuery(player.name);setShowResults(false);if(onPlayerSelect){onPlayerSelect(player);}};const handleInputChange=e=>{setQuery(e.target.value);if(e.target.value.length<2){setShowResults(false);}};const handleKeyDown=e=>{if(e.key==='Escape'){setShowResults(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",ref:searchRef,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:query,onChange:handleInputChange,onKeyDown:handleKeyDown,onFocus:()=>query.length>=2&&setShowResults(true),placeholder:placeholder,className:\"input-primary w-full pl-10 pr-4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 text-secondary-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"})})}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 right-0 pr-3 flex items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600\"})})]}),showResults&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute z-10 mt-1 w-full bg-white rounded-lg shadow-lg border border-secondary-200 max-h-96 overflow-y-auto\",children:error?/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-red-600 text-sm\",children:error}):results.length>0?/*#__PURE__*/_jsx(_Fragment,{children:results.map(player=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePlayerClick(player),className:\"w-full text-left px-4 py-3 hover:bg-secondary-50 border-b border-secondary-100 last:border-b-0 transition-colors\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-secondary-900\",children:player.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-secondary-600\",children:[player.team,\" \\u2022 \",player.position]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-secondary-500\",children:player.active?'Active':'Inactive'})]})},player.id))}):query.length>=2&&!loading?/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 text-secondary-600 text-sm text-center\",children:[\"No players found for \\\"\",query,\"\\\"\"]}):null})]});};export default PlayerSearch;","map":{"version":3,"names":["React","useState","useEffect","useRef","playerAPI","handleAPIError","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PlayerSearch","_ref","onPlayerSelect","placeholder","query","setQuery","results","setResults","loading","setLoading","showResults","setShowResults","error","setError","searchRef","debounceRef","current","clearTimeout","length","setTimeout","performSearch","handleClickOutside","event","contains","target","document","addEventListener","removeEventListener","searchQuery","response","search","data","handlePlayerClick","player","name","handleInputChange","e","value","handleKeyDown","key","className","ref","children","type","onChange","onKeyDown","onFocus","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","map","onClick","team","position","active","id"],"sources":["/home/jeffreyconboy/StatEdge/frontend/src/components/PlayerSearch.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { playerAPI, handleAPIError } from '../utils/api';\n\nconst PlayerSearch = ({ onPlayerSelect, placeholder = \"Search for players...\" }) => {\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [showResults, setShowResults] = useState(false);\n  const [error, setError] = useState(null);\n  \n  const searchRef = useRef(null);\n  const debounceRef = useRef(null);\n\n  // Debounced search\n  useEffect(() => {\n    if (debounceRef.current) {\n      clearTimeout(debounceRef.current);\n    }\n\n    if (query.length >= 2) {\n      debounceRef.current = setTimeout(() => {\n        performSearch(query);\n      }, 300);\n    } else {\n      setResults([]);\n      setShowResults(false);\n    }\n\n    return () => {\n      if (debounceRef.current) {\n        clearTimeout(debounceRef.current);\n      }\n    };\n  }, [query]);\n\n  // Click outside handler\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (searchRef.current && !searchRef.current.contains(event.target)) {\n        setShowResults(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  const performSearch = async (searchQuery) => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      const response = await playerAPI.search(searchQuery, 8);\n      setResults(response.data || []);\n      setShowResults(true);\n    } catch (error) {\n      setError(handleAPIError(error));\n      setResults([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlePlayerClick = (player) => {\n    setQuery(player.name);\n    setShowResults(false);\n    if (onPlayerSelect) {\n      onPlayerSelect(player);\n    }\n  };\n\n  const handleInputChange = (e) => {\n    setQuery(e.target.value);\n    if (e.target.value.length < 2) {\n      setShowResults(false);\n    }\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Escape') {\n      setShowResults(false);\n    }\n  };\n\n  return (\n    <div className=\"relative\" ref={searchRef}>\n      <div className=\"relative\">\n        <input\n          type=\"text\"\n          value={query}\n          onChange={handleInputChange}\n          onKeyDown={handleKeyDown}\n          onFocus={() => query.length >= 2 && setShowResults(true)}\n          placeholder={placeholder}\n          className=\"input-primary w-full pl-10 pr-4\"\n        />\n        <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n          <svg className=\"h-5 w-5 text-secondary-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n          </svg>\n        </div>\n        {loading && (\n          <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center\">\n            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600\"></div>\n          </div>\n        )}\n      </div>\n\n      {/* Search Results Dropdown */}\n      {showResults && (\n        <div className=\"absolute z-10 mt-1 w-full bg-white rounded-lg shadow-lg border border-secondary-200 max-h-96 overflow-y-auto\">\n          {error ? (\n            <div className=\"p-4 text-red-600 text-sm\">\n              {error}\n            </div>\n          ) : results.length > 0 ? (\n            <>\n              {results.map((player) => (\n                <button\n                  key={player.id}\n                  onClick={() => handlePlayerClick(player)}\n                  className=\"w-full text-left px-4 py-3 hover:bg-secondary-50 border-b border-secondary-100 last:border-b-0 transition-colors\"\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <div className=\"font-medium text-secondary-900\">\n                        {player.name}\n                      </div>\n                      <div className=\"text-sm text-secondary-600\">\n                        {player.team} â€¢ {player.position}\n                      </div>\n                    </div>\n                    <div className=\"text-xs text-secondary-500\">\n                      {player.active ? 'Active' : 'Inactive'}\n                    </div>\n                  </div>\n                </button>\n              ))}\n            </>\n          ) : query.length >= 2 && !loading ? (\n            <div className=\"p-4 text-secondary-600 text-sm text-center\">\n              No players found for \"{query}\"\n            </div>\n          ) : null}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PlayerSearch;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}